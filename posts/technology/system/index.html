<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>系统配置和问题 - SivanLaai's Blog</title><meta name=author content="SivanLaai"><meta name=author-link content="https://www.laais.cn"><meta name=description content="Linux /usr/bin/dpkg returned an error code (1) 解决dpkg错误 1 2 3 cd /var/lib/dpkg sudo mv info info.baksudo mkdir info 添加用户名和添加sudo 添加用户名 1 sudo useradd -m -d /data/username -s /bin/zsh username 修改密码 1 sudo passwd username 添加sudoers 1"><meta name=keywords content="linux,windows"><meta itemprop=name content="系统配置和问题"><meta itemprop=description content="Linux /usr/bin/dpkg returned an error code (1) 解决dpkg错误 1 2 3 cd /var/lib/dpkg sudo mv info info.baksudo mkdir info 添加用户名和添加sudo 添加用户名 1 sudo useradd -m -d /data/username -s /bin/zsh username 修改密码 1 sudo passwd username 添加sudoers 1"><meta itemprop=datePublished content="2021-09-16T16:05:49+00:00"><meta itemprop=dateModified content="2023-03-01T15:43:31+08:00"><meta itemprop=wordCount content="1391"><meta itemprop=image content="https://www.laais.cn/avatar.png"><meta itemprop=keywords content="linux,windows,"><meta property="og:title" content="系统配置和问题"><meta property="og:description" content="Linux /usr/bin/dpkg returned an error code (1) 解决dpkg错误 1 2 3 cd /var/lib/dpkg sudo mv info info.baksudo mkdir info 添加用户名和添加sudo 添加用户名 1 sudo useradd -m -d /data/username -s /bin/zsh username 修改密码 1 sudo passwd username 添加sudoers 1"><meta property="og:type" content="article"><meta property="og:url" content="https://www.laais.cn/posts/technology/system/"><meta property="og:image" content="https://www.laais.cn/avatar.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-09-16T16:05:49+00:00"><meta property="article:modified_time" content="2023-03-01T15:43:31+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.laais.cn/avatar.png"><meta name=twitter:title content="系统配置和问题"><meta name=twitter:description content="Linux /usr/bin/dpkg returned an error code (1) 解决dpkg错误 1 2 3 cd /var/lib/dpkg sudo mv info info.baksudo mkdir info 添加用户名和添加sudo 添加用户名 1 sudo useradd -m -d /data/username -s /bin/zsh username 修改密码 1 sudo passwd username 添加sudoers 1"><meta name=application-name content="Sivanlaai's blog"><meta name=apple-mobile-web-app-title content="Sivanlaai's blog"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://www.laais.cn/posts/technology/system/><link rel=prev href=https://www.laais.cn/posts/projects/resume_parser/><link rel=next href=https://www.laais.cn/posts/technology/python/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"系统配置和问题","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/www.laais.cn\/posts\/technology\/system\/"},"image":["https:\/\/www.laais.cn\/apple-touch-icon.png"],"genre":"posts","keywords":"linux, windows","wordcount":1391,"url":"https:\/\/www.laais.cn\/posts\/technology\/system\/","datePublished":"2021-09-16T16:05:49+00:00","dateModified":"2023-03-01T15:43:31+08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"SivanLaai","logo":"https:\/\/www.laais.cn\/avatar.png"},"author":{"@type":"Person","name":"SivanLaai"},"description":""}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=custom><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=right><div class=header-title><a href=/ title="SivanLaai's Blog"><img loading=lazy src=/avatar.png srcset="/avatar.png, /avatar.png 1.5x, /avatar.png 2x" sizes=auto data-title="SivanLaai's Blog" data-alt="SivanLaai's Blog" class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>SivanLaai's blog</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 所有文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/ccf title=CCF推荐><i class="fa-solid fa-book fa-fw fa-sm" aria-hidden=true></i> CCF</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item delimiter"></li><li class="menu-item language"><span role=button aria-label title>简体中文<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i></span><ul class=sub-menu><li class=menu-item></li></ul></li><li class="menu-item search" id=search-desktop><input type=text placeholder id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="SivanLaai's Blog"><img loading=lazy src=/avatar.png srcset="/avatar.png, /avatar.png 1.5x, /avatar.png 2x" sizes=auto data-title=/avatar.png data-alt=/avatar.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>SivanLaai's blog</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile></a></li><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 所有文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/ccf title=CCF推荐><i class="fa-solid fa-book fa-fw fa-sm" aria-hidden=true></i> CCF</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item text-center"><a class=menu-link href=https://github.com/SivanLaai/blog title=GitHub rel="noopener noreferrer" target=_blank><i class='fa-brands fa-github fa-fw' aria-hidden=true></i></a></li><li class="menu-item theme-switch" title><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li><li class="menu-item language"><span role=button aria-label title>简体中文<i class="dropdown-icon fa-solid fa-chevron-down" aria-hidden=true></i></span>
<select class=language-select onchange="location=this.value"><option disabled></option></select></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?aa4e404535364259553aa4bd8f89bb3a",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>系统配置和问题</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://www.laais.cn title=作者 target=_blank rel="external nofollow noopener noreferrer author" class=author><i class="fa-solid fa-user-circle" aria-hidden=true></i>
SivanLaai</a></span>
<span class=post-category>收录于 <a href=/categories/%E6%95%99%E7%A8%8B/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> 教程</a></span></div><div class=post-meta-line><span title="发布于 2021-09-16 16:05:49"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2021-09-16>2021-09-16</time></span>&nbsp;<span title="更新于 2023-03-01 15:43:31"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2023-03-01>2023-03-01</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>约 1391 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>预计阅读 3 分钟</span>&nbsp;<span class=comment-visitors data-flag-title=系统配置和问题>
<i class="fa-regular fa-eye fa-fw me-1" aria-hidden=true></i><span data-path=/posts/technology/system/ class=waline-pageview-count>-</span>&nbsp;次阅读
</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#usrbindpkg-returned-an-error-code-1>/usr/bin/dpkg returned an error code (1)</a><ul><li><a href=#解决dpkg错误>解决dpkg错误</a></li></ul></li><li><a href=#添加用户名和添加sudo>添加用户名和添加sudo</a><ul><li><a href=#添加用户名>添加用户名</a></li><li><a href=#修改密码>修改密码</a></li><li><a href=#添加sudoers>添加sudoers</a></li></ul></li><li><a href=#ubuntu安装linux开发包>Ubuntu安装Linux开发包</a></li><li><a href=#根据关键字把进程杀掉>根据关键字把进程杀掉</a></li><li><a href=#linux永久挂载硬盘>linux永久挂载硬盘</a><ul><li><ul><li><a href=#查看当前的硬盘状态可以知道硬盘的分区>查看当前的硬盘状态，可以知道硬盘的分区</a></li><li><a href=#修改配置>修改配置</a></li><li><a href=#挂载硬盘>挂载硬盘</a></li></ul></li></ul></li><li><a href=#linux开机自启动并服务化>linux开机自启动并服务化</a><ul><li><a href=#ubuntu>Ubuntu</a><ul><li><a href=#开机启动>开机启动</a></li><li><a href=#系统服务化以qbittorrent服务化为例>系统服务化（以qbittorrent服务化为例）</a></li><li><a href=#用户服务化以v2ray服务化为例不需要sudo也可以启动在某个用户登录的时候启动>用户服务化（以v2ray服务化为例，不需要sudo也可以启动，在某个用户登录的时候启动）</a></li></ul></li></ul></li><li><a href=#linux安装常见中文字体>linux安装常见中文字体</a><ul><li><a href=#ubuntu-1>Ubuntu</a></li></ul></li></ul><ul><li><a href=#给neovim添加右键文件夹文件以及右键空白区域三种菜单>给Neovim添加右键文件夹、文件以及右键空白区域三种菜单</a><ul><li><ul><li><ul><li><a href=#右键文件夹>右键文件夹</a></li><li><a href=#右键文件>右键文件</a></li><li><a href=#右键文件-1>右键文件</a></li><li><a href=#参考文档>参考文档</a></li></ul></li></ul></li></ul></li></ul></nav></div></div><div class=content id=content><div class="details admonition warning open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-exclamation-triangle fa-fw" aria-hidden=true></i>警告<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>本文最后更新于 2023-03-01，文中内容可能已过时。</div></div></div><h1 id=linux>Linux</h1><h2 id=usrbindpkg-returned-an-error-code-1>/usr/bin/dpkg returned an error code (1)</h2><h3 id=解决dpkg错误>解决dpkg错误</h3><div class=highlight id=id-1><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /var/lib/dpkg
</span></span><span class=line><span class=cl>sudo mv info info.baksudo
</span></span><span class=line><span class=cl>mkdir info</span></span></code></pre></td></tr></table></div></div><h2 id=添加用户名和添加sudo>添加用户名和添加sudo</h2><h3 id=添加用户名>添加用户名</h3><div class=highlight id=id-2><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo useradd -m -d /data/username -s /bin/zsh username</span></span></code></pre></td></tr></table></div></div><h3 id=修改密码>修改密码</h3><div class=highlight id=id-3><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo passwd username</span></span></code></pre></td></tr></table></div></div><h3 id=添加sudoers>添加sudoers</h3><div class=highlight id=id-4><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>vi /etc/sudoers
</span></span><span class=line><span class=cl><span class=c1>#添加用户</span>
</span></span><span class=line><span class=cl>username    <span class=nv>ALL</span><span class=o>=(</span>ALL:ALL<span class=o>)</span> ALL</span></span></code></pre></td></tr></table></div></div><h2 id=ubuntu安装linux开发包>Ubuntu安装Linux开发包</h2><div class=highlight id=id-5><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo apt-get install build-essential</span></span></code></pre></td></tr></table></div></div><h2 id=根据关键字把进程杀掉>根据关键字把进程杀掉</h2><div class=highlight id=id-6><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>kill</span> -9 <span class=k>$(</span>ps -ef<span class=p>|</span>grep keyword<span class=p>|</span>gawk <span class=s1>&#39;$0 !~/grep/ {print $2}&#39;</span> <span class=p>|</span>tr -s <span class=s1>&#39;\n&#39;</span> <span class=s1>&#39; &#39;</span><span class=k>)</span></span></span></code></pre></td></tr></table></div></div><h2 id=linux永久挂载硬盘>linux永久挂载硬盘</h2><h4 id=查看当前的硬盘状态可以知道硬盘的分区>查看当前的硬盘状态，可以知道硬盘的分区</h4><div class=highlight id=id-7><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo fdisk -l</span></span></code></pre></td></tr></table></div></div><h4 id=修改配置>修改配置</h4><div class=highlight id=id-8><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo vim /etc/fstab</span></span></code></pre></td></tr></table></div></div><div class=highlight id=id-9><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 添加如下信息挂载硬盘</span>
</span></span><span class=line><span class=cl>/dev/sdb1 /mnt/data ntfs-3g defaults <span class=m>0</span> <span class=m>0</span></span></span></code></pre></td></tr></table></div></div><h4 id=挂载硬盘>挂载硬盘</h4><div class=highlight id=id-10><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir -p /mnt/data
</span></span><span class=line><span class=cl>sudo mount -a</span></span></code></pre></td></tr></table></div></div><h2 id=linux开机自启动并服务化>linux开机自启动并服务化</h2><h3 id=ubuntu>Ubuntu</h3><h4 id=开机启动>开机启动</h4><h4 id=系统服务化以qbittorrent服务化为例>系统服务化（以qbittorrent服务化为例）</h4><p>不要在后面添加#的注释，不然会导致未知错误</p><ul><li>配置文件<code>/lib/systemd/system/qbittorrent.service</code></li></ul><div class=highlight id=id-11><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>[</span>Unit<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>Description</span><span class=o>=</span>qbittorrent-nox service <span class=c1>#服务描述</span>
</span></span><span class=line><span class=cl><span class=nv>Documentation</span><span class=o>=</span>man:qbittorrent-nox<span class=o>(</span>1<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>Service<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>User</span><span class=o>=</span>username   <span class=c1>#用户</span>
</span></span><span class=line><span class=cl><span class=nv>Group</span><span class=o>=</span>usergroup  <span class=c1>#用户组</span>
</span></span><span class=line><span class=cl><span class=nv>UMask</span><span class=o>=</span><span class=m>0000</span>  <span class=c1>#权限777</span>
</span></span><span class=line><span class=cl><span class=nv>Type</span><span class=o>=</span>simple
</span></span><span class=line><span class=cl><span class=c1>#ExecStartPre=-cd /home/&lt;span class=&#34;hljs-built_in&#34;&gt;test&lt;/span&gt;/ #启动前执行</span>
</span></span><span class=line><span class=cl><span class=c1>#WorkingDirectory=/home/&lt;span class=&#34;hljs-built_in&#34;&gt;test&lt;/span&gt;/ #工作目录</span>
</span></span><span class=line><span class=cl><span class=nv>ExecStart</span><span class=o>=</span>/usr/bin/qbittorrent-nox <span class=c1>#启动时执行</span>
</span></span><span class=line><span class=cl><span class=nv>ExecReload</span><span class=o>=</span>/bin/kill -SIGHUP <span class=nv>$MAINPID</span> <span class=c1>#重启时执行</span>
</span></span><span class=line><span class=cl><span class=nv>ExecStop</span><span class=o>=</span>/bin/kill -SIGINT <span class=nv>$MAINPID</span> <span class=c1>#停止时执行</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>[</span>Install<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=nv>WantedBy</span><span class=o>=</span>default.target</span></span></code></pre></td></tr></table></div></div><ul><li>服务常用命令集合</li></ul><div class=highlight id=id-12><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 开机启动</span>
</span></span><span class=line><span class=cl>systemctl <span class=nb>enable</span> qbittorrent
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 关闭开机启动</span>
</span></span><span class=line><span class=cl>systemctl disable qbittorrent
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 启动服务</span>
</span></span><span class=line><span class=cl>systemctl start qbittorrent
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 停止服务</span>
</span></span><span class=line><span class=cl>systemctl stop qbittorrent
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 重启服务</span>
</span></span><span class=line><span class=cl>systemctl restart qbittorrent
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 查看服务状态</span>
</span></span><span class=line><span class=cl>systemctl status qbittorrent
</span></span><span class=line><span class=cl>systemctl is-active sshd.service
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 结束服务进程(服务无法停止时)</span>
</span></span><span class=line><span class=cl>systemctl <span class=nb>kill</span> qbittorrent</span></span></code></pre></td></tr></table></div></div><h4 id=用户服务化以v2ray服务化为例不需要sudo也可以启动在某个用户登录的时候启动>用户服务化（以v2ray服务化为例，不需要sudo也可以启动，在某个用户登录的时候启动）</h4><p>不要在后面添加#的注释，不然会导致未知错误</p><ul><li>配置文件~/.config/systemd/user/v2ray.service```</li></ul><div class=highlight id=id-13><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[Unit]
</span></span><span class=line><span class=cl>Description=keep v2ray&#39;s servie alive
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[Service]
</span></span><span class=line><span class=cl>Type=simple
</span></span><span class=line><span class=cl>Restart=always
</span></span><span class=line><span class=cl>WorkingDirectory=~/v2ray/
</span></span><span class=line><span class=cl>ExecStart=bash v2ray.sh
</span></span><span class=line><span class=cl>SystemCallArchitectures=native
</span></span><span class=line><span class=cl>MemoryDenyWriteExecute=true
</span></span><span class=line><span class=cl>NoNewPrivileges=true
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[Install]
</span></span><span class=line><span class=cl>WantedBy=default.target</span></span></code></pre></td></tr></table></div></div><ul><li>启动服务在原来的基础上加<code>--user</code></li></ul><div class=highlight id=id-14><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>```bash
</span></span><span class=line><span class=cl># 开机启动
</span></span><span class=line><span class=cl>systemctl --user enable --now v2ray
</span></span><span class=line><span class=cl># 关闭开机启动
</span></span><span class=line><span class=cl>systemctl --user disable --now v2ray</span></span></code></pre></td></tr></table></div></div><h2 id=linux安装常见中文字体>linux安装常见中文字体</h2><h3 id=ubuntu-1>Ubuntu</h3><ul><li>打包Windows字体</li></ul><div class=highlight id=id-15><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir -p winfonts
</span></span><span class=line><span class=cl>cp -rf C:/Windows/Fonts winfonts
</span></span><span class=line><span class=cl>压缩winfonts为winfonts.zip</span></span></code></pre></td></tr></table></div></div><ul><li>上传到linux</li></ul><div class=highlight id=id-16><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>scp winfonts.zip username@host:~</span></span></code></pre></td></tr></table></div></div><ul><li>安装字体</li></ul><div class=highlight id=id-17><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>unzip -n -d /usr/share/fonts winfonts.zip
</span></span><span class=line><span class=cl>sudo mkfontscale
</span></span><span class=line><span class=cl>sudo mkfontdir
</span></span><span class=line><span class=cl>sudo fc-cache -f -v</span></span></code></pre></td></tr></table></div></div><ul><li>检查中文字体</li></ul><div class=highlight id=id-18><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>fc-list :lang=zh</span></span></code></pre></td></tr></table></div></div><h1 id=windows>Windows</h1><h2 id=给neovim添加右键文件夹文件以及右键空白区域三种菜单>给Neovim添加右键文件夹、文件以及右键空白区域三种菜单</h2><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/SivanLaai/image-store-rep@master/note/20220408200405.png srcset="https://cdn.jsdelivr.net/gh/SivanLaai/image-store-rep@master/note/20220408200405.png, https://cdn.jsdelivr.net/gh/SivanLaai/image-store-rep@master/note/20220408200405.png 1.5x, https://cdn.jsdelivr.net/gh/SivanLaai/image-store-rep@master/note/20220408200405.png 2x" sizes=auto data-title=https://cdn.jsdelivr.net/gh/SivanLaai/image-store-rep@master/note/20220408200405.png data-alt=https://cdn.jsdelivr.net/gh/SivanLaai/image-store-rep@master/note/20220408200405.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h5 id=右键文件夹>右键文件夹</h5><ul><li>添加如下值</li></ul><div class=highlight id=id-19><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>计算机\HKEY_CLASSES_ROOT\Directory\shell\使用Neovim打开</span></span></code></pre></td></tr></table></div></div><ul><li>添加Icon
在<code>使用Neovim打开</code>空白处添加字符串项<code>Icon</code>设置值为<code>"D:\Program Files\Neovim\bin\gnvim.exe"</code></li><li>添加打开命令
在<code>使用Neovim打开</code>添加子项<code>command</code>，设置值为<code>"D:\Program Files\Neovim\bin\gnvim.exe" -qwindowgeometry 1310x650+20+20 "%1"</code></li></ul><h5 id=右键文件>右键文件</h5><ul><li>添加如下值</li></ul><div class=highlight id=id-20><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>计算机\HKEY_CLASSES_ROOT\*\shell\使用Neovim打开</span></span></code></pre></td></tr></table></div></div><ul><li>添加Icon
在<code>使用Neovim打开</code>空白处添加字符串项<code>Icon</code>设置值为<code>"D:\Program Files\Neovim\bin\gnvim.exe"</code></li><li>添加打开命令
在<code>使用Neovim打开</code>添加子项<code>command</code>，设置值为<code>"D:\Program Files\Neovim\bin\gnvim.exe" -qwindowgeometry 1310x650+20+20 "%1"</code></li></ul><h5 id=右键文件-1>右键文件</h5><ul><li>添加如下值</li></ul><div class=highlight id=id-21><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>计算机\HKEY_CLASSES_ROOT\Directory\Background\shell\使用Neovim打开</span></span></code></pre></td></tr></table></div></div><ul><li>添加Icon
在<code>使用Neovim打开</code>空白处添加字符串项<code>Icon</code>设置值为<code>"D:\Program Files\Neovim\bin\gnvim.exe"</code></li><li>添加打开命令
在<code>使用Neovim打开</code>添加子项<code>command</code>，设置值为<code>"D:\Program Files\Neovim\bin\gnvim.exe"</code></li></ul><h5 id=参考文档>参考文档</h5><ul><li><a href=https://blog.csdn.net/qq_34769162/article/details/117068877 target=_blank rel="external nofollow noopener noreferrer">使用注册表编辑win10鼠标右键菜单，详细解释（右键文件夹、文件以及右键空白区域下三种情况）_鸾镜朱颜暗换的博客-CSDN博客_桌面右键菜单注册表<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></li><li><a href=https://stackoverflow.com/questions/20449316/how-add-context-menu-item-to-windows-explorer-for-folders target=_blank rel="external nofollow noopener noreferrer">contextmenu - How add context menu item to Windows Explorer for folders - Stack Overflow<i class="fa-solid fa-external-link-alt fa-fw fa-xs ms-1 text-secondary" aria-hidden=true></i></a></li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="更新于 2023-03-01 15:43:31">更新于 2023-03-01&nbsp;<a class=git-hash href=https://github.com/SivanLaai/blog/commit/1c4f73e57d7fe20fd18e50db84040b201a346da8 rel="external nofollow noopener noreferrer" target=_blank title="commit by SivanLaai(lyhhap@163.com) 1c4f73e57d7fe20fd18e50db84040b201a346da8: update passages"><i class="fa-solid fa-hashtag fa-fw" aria-hidden=true></i>1c4f73e</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/posts/technology/system/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span><span><a href=https://github.com/SivanLaai/blog/edit/master/content/posts/technology/system.md title=编辑此页 target=_blank rel="external nofollow noopener noreferrer" class=link-to-edit>编辑此页</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://www.laais.cn/posts/technology/system/ data-title=系统配置和问题 data-hashtags=linux,windows><i class="fa-brands fa-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://www.laais.cn/posts/technology/system/ data-hashtag=linux><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Hacker News" data-sharer=hackernews data-url=https://www.laais.cn/posts/technology/system/ data-title=系统配置和问题><i class="fa-brands fa-hacker-news fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Line" data-sharer=line data-url=https://www.laais.cn/posts/technology/system/ data-title=系统配置和问题><i data-svg-src=/lib/simple-icons/icons/line.min.svg aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://www.laais.cn/posts/technology/system/ data-title=系统配置和问题><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/linux/ class=post-tag>linux</a><a href=/tags/windows/ class=post-tag>windows</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/posts/projects/resume_parser/ class=post-nav-item rel=prev title=简历解析软件安装><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>简历解析软件安装</a>
<a href=/posts/technology/python/ class=post-nav-item rel=next title=python总结>python总结<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=waline class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://waline.js.org/ rel="external nofollow noopener noreferrer">Waline</a>.</noscript></div></article></main><footer class=footer><div class=footer-container><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2018 - 2023</span><span class=author itemprop=copyrightHolder>
<a href=https://www.laais.cn target=_blank rel="external nofollow noopener noreferrer">SivanLaai</a></span></div><div class="footer-line statistics"><span class=site-time title><i class="fa-solid fa-heartbeat fa-fw animate-icon" aria-hidden=true></i>&nbsp;<span class=run-times></span></span></div><div class="footer-line beian"><a href=https://beian.miit.gov.cn class="icp footer-divider">京ICP备2023014024号-1</a></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class=variant-numeric>0%</span></div><div class="fixed-button view-comments d-none" role=button aria-label=查看评论><i class="fa-solid fa-comment fa-fw" aria-hidden=true></i></div></div><a href=https://github.com/SivanLaai/blog title="在 GitHub 上查看源代码" target=_blank rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;top:0;--bg-progress:#000;--bg-progress-dark:#fff></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=/lib/waline/waline.css><link rel=stylesheet href=/lib/katex/katex.min.css><script src=/lib/waline/waline.js defer></script><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/fuse/fuse.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/pangu/pangu.min.js defer></script><script src=/lib/cell-watermark/watermark.min.js defer></script><script>window.config={autoBookmark:!0,code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:10},comment:{enable:!0,expired:!1,waline:{copyright:!0,dark:"body[data-theme='dark']",el:"#waline",emoji:["//unpkg.com/@waline/emojis@1.1.0/weibo"],highlighter:!1,imageUploader:!1,lang:"zh-cn",login:"enable",meta:["nick","mail","link"],pageSize:10,pageview:!0,search:!1,serverURL:"https://comment.laais.cn/",texRenderer:!1}},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},pangu:{enable:!0,selector:""},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:30,threshold:.3,type:"fuse",useExtendedSearch:!1},watermark:{appendto:".wrapper>main",colspacing:30,content:'<img class="fixit-icon" src="/safari-pinned-tab.svg" alt="FixIt logo" /> FixIt 主题',enable:!0,fontfamily:"inherit",fontsize:.85,height:21,opacity:.0125,rotate:15,rowspacing:60,width:150}}</script><script src=/js/theme.min.js defer></script></body></html>